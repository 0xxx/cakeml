INCLUDES = ../semantics ../../lem/hol-lib

OPTIONS = QUIT_ON_FAILURE

bytecodeScript.sml: compilerLib.lem printer.lem bytecode.lem
	lem -auxiliary_level auto $(patsubst %,-i ../semantics/%.lem,lib ast semanticPrimitives) -hol compilerLib.lem -hol printer.lem -hol bytecode.lem -hol &&\
	sed 's/LEAST/$$LEAST/g' < bytecodeScript.sml > .temp &&\
	sed 's/Hol.char/char/g' < .temp > bytecodeScript.sml &&\
	rm -f .temp
