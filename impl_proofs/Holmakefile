INCLUDES=.. ../semantics ../implementation ../metatheory ../compiler/bytecode ../compiler/proofs ../parsing
OPTIONS = QUIT_ON_FAILURE

ifdef POLY
HOLHEAP = proofs_heap
EXTRA_CLEANS = $(HOLHEAP) $(HOLHEAP).o

IMPL_BARE_THYS = inferTheory unifyTheory repl_funTheory
IMPL_BARE_THYS = inferTheory unifyTheory repl_fun_altTheory repl_funTheory

SEM_BARE_THYS = AstTheory SemanticPrimitivesTheory terminationTheory TypeSystemTheory

META_BARE_THYS = typeSysPropsTheory

COMPILER_BARE_THYS = compilerProofsTheory

BYTECODE_BARE_THYS = bytecodeLabelsTheory

BARE_THYS = $(patsubst %,../semantics/%,$(SEM_BARE_THYS))\
	    $(patsubst %,../implementation/%,$(IMPL_BARE_THYS))\
	    $(patsubst %,../metatheory/%,$(META_BARE_THYS))\
	    $(patsubst %,../compiler/bytecode/%,$(BYTECODE_BARE_THYS))\
	    $(patsubst %,../compiler/proofs/%,$(COMPILER_BARE_THYS))

DEPS = $(patsubst %,%.uo,$(BARE_THYS))

$(HOLHEAP): $(DEPS)
	$(protect $(HOLDIR)/bin/buildheap) -b ../implementation/impl_heap -o $(HOLHEAP) $(BARE_THYS)
endif
